(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"1Gzp":function(e,t,n){},GdG0:function(e,t,n){"use strict";var r=n("P0qE");t.a={login:function(e){return Object(r.b)("/login",e)},signUp:function(e){return Object(r.b)("/register",e)}}},P0qE:function(e,t,n){"use strict";function r(e,t,n,r,a,o,c){try{var i=e[o](c),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(a,o){var c=e.apply(t,n);function i(e){r(c,a,o,i,s,"next",e)}function s(e){r(c,a,o,i,s,"throw",e)}i(void 0)}))}}n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return l}));var o="https://physio.coreviewsystems.com:8081",c=function(e){return null==e?"":e},i=function(e,t){return t?"".concat(e,"?").concat(Object.keys(t).map((function(e){return Array.isArray(t[e])?t[e].map((function(t){return"".concat(e,"[]=").concat(c(t).toString().replace("+","%2B")).trim()})).join("&"):"".concat(e,"=").concat(c(t[e]).toString().replace("+","%2B")).trim()})).join("&")):e},s=function(){var e=a(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=localStorage.getItem("token"),a={method:"GET",headers:{Accept:"application/json"}},r&&(a.headers.Authorization="Bearer ".concat(r)),e.abrupt("return",fetch("".concat(o).concat(i(t,n)),a).then((function(e){return e.json()}),(function(e){return e})));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),u=function(){var e=a(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=localStorage.getItem("token"),a={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"}},n&&(a.body=JSON.stringify(n)),r&&(a.headers.Authorization="Bearer ".concat(r)),e.abrupt("return",fetch("".concat(o).concat(t),a).then((function(e){return e.json()}),(function(e){return e})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),l=function(){var e=a(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=localStorage.getItem("token"),a={method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"}},n&&(a.body=JSON.stringify(n)),r&&(a.headers.Authorization="Bearer ".concat(r)),e.abrupt("return",fetch("".concat(o).concat(t),a).then((function(e){return e.json()}),(function(e){return e})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},r7jH:function(e,t,n){"use strict";n.r(t);var r=n("q1tI"),a=n.n(r),o=n("XGPw"),c=n("GdG0");n("1Gzp");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var a=p(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(m,e);var t,n,r,i=l(m);function m(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),h(f(t=i.call(this,e)),"handleChange",(function(e){t.setState({user:e.target.value})})),h(f(t),"passwordChange",(function(e){t.setState({password:e.target.value})})),h(f(t),"usernameChange",(function(e){t.setState({username:e.target.value})})),h(f(t),"parseJwt",(function(e){var t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(window.atob(t).split("").map((function(e){return"%".concat("00".concat(e.charCodeAt(0).toString(16)).slice(-2))})).join(""));return JSON.parse(n)})),h(f(t),"goToSignUp",(function(){t.props.history.push("/landing/sign-up")})),h(f(t),"login",(function(){t.setState({isLoading:!0});var e={username:t.state.username,password:t.state.password};c.a.login(e).then((function(e){if(t.setState({isLoading:!1}),e&&e.access_token&&200===e.code){var n=t.parseJwt(e.access_token);localStorage.setItem("token",e.access_token),localStorage.setItem("userInfo",JSON.stringify(n)),"time"===e.goal?localStorage.setItem("goal-unit","minutes"):localStorage.setItem("goal-unit","calories"),!0===e.is_goal_set?t.props.history.push("/app/welcome"):t.props.history.push("/app/set-weekly-goal")}else e&&401===e.code&&t.setState({validation:!0,validationMessage:e.message})})).catch((function(e){console.log("error",e),t.setState({isLoading:!1})}))})),t.state={user:"user",username:"",password:"",isLoading:!1,validation:!1,validationMessage:""},t}return t=m,(n=[{key:"render",value:function(){return a.a.createElement("div",{className:"w-100 h-100 login-parent d-flex flex-row justify-content-center"},a.a.createElement("div",{className:"login-inner h-auto d-flex flex-column justify-content-center "},a.a.createElement("span",{className:"logo-text"},"EliteFit"),a.a.createElement("span",{className:"who-is-this"},"Hello, who's this?"),a.a.createElement("form",{className:"w-100 login"},a.a.createElement("div",{className:"form-group"},a.a.createElement("div",{className:"form-check form-check-inline"},a.a.createElement("input",{className:"form-check-input",type:"radio",name:"user",id:"user",value:"user",onChange:this.handleChange,checked:"user"===this.state.user}),a.a.createElement("label",{className:"form-check-label",htmlFor:"user"},"User")),a.a.createElement("div",{className:"form-check form-check-inline"},a.a.createElement("input",{className:"form-check-input",type:"radio",name:"trainer",id:"trainer",value:"trainer",onChange:this.handleChange,checked:"trainer"===this.state.user}),a.a.createElement("label",{className:"form-check-label",htmlFor:"trainer"},"Trainer"))),a.a.createElement("div",{className:"form-group"},a.a.createElement("label",{htmlFor:"username"},"Username/NRIC/FIN"),a.a.createElement("input",{type:"text",className:"form-control",id:"username",name:"username",value:this.state.username,onChange:this.usernameChange,placeholder:"Username/NRIC/FIN"})),a.a.createElement("div",{className:"form-group"},a.a.createElement("label",{htmlFor:"password"},"Password"),a.a.createElement("input",{type:"password",className:"form-control",id:"password",name:"password",value:this.state.password,onChange:this.passwordChange,placeholder:"Password"})),a.a.createElement("div",{className:"form-group d-flex flex-row justify-content-between align-items-center"},a.a.createElement("div",{className:"form-check form-check-inline"},a.a.createElement("input",{type:"checkbox",className:"form-check-input",id:"remember-me",name:"remember-me"}),a.a.createElement("label",{className:"form-check-label remember-me",htmlFor:"remember-me"},"Remember me")),a.a.createElement("div",{className:"form-check form-check-inline m-0"},a.a.createElement("a",{className:"forgot-password",href:"/#"},"Forgot Password?"))),a.a.createElement("div",{className:"w-100 h-auto d-flex flex-column justify-content-between align-items-center"},a.a.createElement("button",{type:"button",onClick:this.login,className:"buttons"},"Login"),a.a.createElement("button",{type:"button",onClick:this.goToSignUp,className:"buttons"},"Sign Up")))),this.state.isLoading&&a.a.createElement(o.a,{loadingText:"Logging In..."}),this.state.validation&&a.a.createElement("div",{className:"validation-box"},this.state.validationMessage))}}])&&s(t.prototype,n),r&&s(t,r),m}(a.a.Component);d.propTypes={},d.defaultProps={},t.default=d}}]);